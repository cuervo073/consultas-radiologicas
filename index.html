<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Consulta de Estudios M√©dicos</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>Consulta de Estudios M√©dicos</h1>
    <p>Sub√≠ tu radiograf√≠a o resonancia y recib√≠ una orientaci√≥n m√©dica general. Este servicio no reemplaza una consulta m√©dica profesional.</p>
    <form id="uploadForm">
      <label for="fileInput">Seleccion√° tu imagen m√©dica</label>
      <input type="file" id="fileInput" name="image" accept="image/*" required />

      <label for="comments">Contanos tus s√≠ntomas o dudas</label>
      <textarea id="comments" name="comments" rows="4" placeholder="Ej: dolor lumbar desde hace 3 semanas..."></textarea>

      <button type="submit">Enviar consulta</button>
    </form>
    <div class="donate">
      <p>Si quer√©s apoyar este servicio, pod√©s hacer una donaci√≥n voluntaria:</p>
      <a href="https://www.paypal.com/donate" target="_blank">Donar con PayPal</a>
    </div>
  </div>
  <script>
document.getElementById('uploadForm').addEventListener('submit', function(evento) {
  evento.preventDefault(); // Evita que se recargue la p√°gina

  const fileInput = document.getElementById('fileInput');
  const comments = document.getElementById('comments').value;

  if (fileInput.files.length === 0) {
    alert('Por favor sub√≠ una imagen m√©dica.');
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();

  reader.onload = function(e) {
    const base64Image = e.target.result.split(',')[1]; // Parte base64 sin encabezado

    const data = {
      nombreDeImagen: file.name,
      comentarios: comments,
      imagen: base64Image
    };

    // üîó Peg√° ac√° tu URL del Apps Script
    fetch(https://script.google.com/macros/s/AKfycbyQUaxrQb2_Gcmfqt3er4ca-HxuAcjoCkLRGWrpvuIKZ81V4UgReQhKtXpclwOgYWs/exec, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(res => res.json())
    .then(respuesta => {
      alert('Consulta enviada correctamente. Gracias por tu env√≠o.');
      document.getElementById('uploadForm').reset();
    })
    .catch(error => {
      console.error('Error al enviar:', error);
      alert('Hubo un problema al enviar la consulta.');
    });
  };

  reader.readAsDataURL(file);
});
</script>
